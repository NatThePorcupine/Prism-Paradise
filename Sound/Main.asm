; =========================================================================================================================================================
; Sound Driver Data & Functions
; =========================================================================================================================================================
; ---------------------------------------------------------------------------------------------------------------------------------------------------------
; Configuration
; ---------------------------------------------------------------------------------------------------------------------------------------------------------
		include	"Sound/Definition Macros (68K).asm"	; Driver Definition Macros (68K-Side)

; =========================================================================================================================================================
; ---------------------------------------------------------------------------------------------------------------------------------------------------------
; Load the Z80 sound driver program
; ---------------------------------------------------------------------------------------------------------------------------------------------------------
; ARGUMENTS:
;	Nothing
; ---------------------------------------------------------------------------------------------------------------------------------------------------------
; RETURNS:
;	Nothing
; ---------------------------------------------------------------------------------------------------------------------------------------------------------
SOUND_LoadDriver:
		lea	SOUND_Z80Driver,a0		; Z80 sound driver program
		lea	Z80_RAM,a1			; Z80 RAM
		move.w	#SOUND_EndOfDriver-SOUND_Z80Driver-1,d1	; Size of the driver
		doZ80Stop				; Stop the Z80
		resetZ80Off				; Cancel Z80 reset
		waitZ80Stop				; Wait for the Z80 to be stopped

.transferData:
		move.b	(a0)+,(a1)+			; Copy driver to Z80 RAM
		dbf	d1,.transferData		; Loop

		resetZ80				; Reset the Z80
		moveq	#$7F,d1				; Wait
		dbf	d1,*				; ''
		startZ80				; Start the Z80
		resetZ80Off				; Cancel Z80 reset
		rts
; ---------------------------------------------------------------------------------------------------------------------------------------------------------

; =========================================================================================================================================================
; ---------------------------------------------------------------------------------------------------------------------------------------------------------
; Music Data
; ---------------------------------------------------------------------------------------------------------------------------------------------------------

; =========================================================================================================================================================
; ---------------------------------------------------------------------------------------------------------------------------------------------------------
; PCM Data
; ---------------------------------------------------------------------------------------------------------------------------------------------------------

; =========================================================================================================================================================
; ---------------------------------------------------------------------------------------------------------------------------------------------------------
; SFX Pointers and Data
; ---------------------------------------------------------------------------------------------------------------------------------------------------------


; =========================================================================================================================================================
; ---------------------------------------------------------------------------------------------------------------------------------------------------------
; Z80 Sound Driver
; ---------------------------------------------------------------------------------------------------------------------------------------------------------
SOUND_Z80Driver:
		incbin "Sound/Driver/Driver Program.bin"

	; This file needs to define the following symbols
	; - The bank IDs of the SFX banks (as determined by the pointers and data inclusions above)
	; - Music track playlist & IDs
	; - PCM sample metadata & IDs
		include "Sound/Driver/Driver Definitions.asm"
SOUND_EndOfDriver:
; ---------------------------------------------------------------------------------------------------------------------------------------------------------